<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

    <link rel="stylesheet" href="../../app/resources/App.css">
    <link rel="stylesheet" href="../../app/resources/Report.css">

    <script type='text/javascript' src="../../dojo/dojo.js"></script>
    <script type='text/javascript' src="../../app/packages.js"></script>
    <script type="text/javascript">
        var baseUrl = window.location.pathname.replace(/\/[^\/]+$/, '') + '/' + '../../';

        require({
            baseUrl: baseUrl
        }, [
            'dojo/text!app/templates/ReportTemplate.html',
            'dojo/text!app/tests/data/report.json',

            'handlebars',

            'jquery',
            'bootstrap',

            'dojo/domReady!'
        ], function(templateTxt, reportTxt, handlebars) {
            var re = /^https?:\/\/(.*?)(?:\/|$)/;
            handlebars.registerHelper('link', function (url) {
                var matches = re.exec(url);
                return (matches && matches.length > 1) ? matches[1] : url;
            });
            var temp = handlebars.compile(templateTxt);
            document.body.innerHTML = temp(JSON.parse(reportTxt));
        });
    </script>
</head>
<body class="report">

</body>
</html>
